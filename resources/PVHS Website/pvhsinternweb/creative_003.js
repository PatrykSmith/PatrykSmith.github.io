// ACCESSIBLE NAVIGATION APP
// AUTHOR BRENTON KELLY - CREATIVE DEVELOPMENT MANAGER - BLACKBOARD INC.
// VERSION 1.5.17

!function(a){a.fn.csAccessibleNavigationApp=function(){return this.each(function(){function d(){a(".ui-widget-detail > ul",b).attr("aria-hidden","false"),a(".ui-widget-detail ul",b).attr("role","menu"),a(".ui-widget-detail ul li",b).attr("role","menuitem"),a(".ui-widget-detail .bullet.expandable",b).attr("role","button").attr("aria-label","Open Submenu").attr("tabindex","0"),a(".ui-widget-detail .bullet.collapsible",b).attr("role","button").attr("aria-label","Close Submenu").attr("tabindex","0"),a(".ui-widget-detail .bullet ~ ul",b).attr("aria-hidden","true"),a(".ui-widget-detail ul li.expandable",b).attr("aria-haspopup","true"),a(".ui-widget-detail ul li.collapsible",b).attr("aria-haspopup","true")}function e(){a(b).on("keydown",".ui-widget-detail ul li a",function(b){switch(b.keyCode){case c.up:b.preventDefault(),a(this).parent().is(":first-child")?a(this).closest("ul").find("> li:last-child > a").focus():a(this).parent().prev("li").find("> a").focus();break;case c.down:b.preventDefault(),a(this).parent().is(":last-child")?a(this).closest("ul").find("> li:first-child > a").focus():a(this).parent().next("li").find("> a").focus();break;case c.left:b.preventDefault(),a(this).prev(".bullet.expandable").length||a(this).prev(".bullet.collapsible").length?a(this).prev(".bullet").focus():a(this).parent().is(":first-child")?a(this).closest("ul").find("> li:last-child > a").focus():a(this).parent().prev("li").find("> a").focus();break;case c.right:b.preventDefault(),a(this).parent().is(":last-child")?a(this).closest("ul").find("> li:first-child").hasClass("expandable")?a(this).closest("ul").find("> li:first-child > .expandable").focus():a(this).closest("ul").find("> li:first-child").hasClass("collapsible")?a(this).closest("ul").find("> li:first-child > .collapsible").focus():a(this).closest("ul").find("> li:first-child > a").focus():a(this).parent().next("li").hasClass("expandable")?a(this).parent().next("li").find("> .expandable").focus():a(this).parent().next("li").hasClass("collapsible")?a(this).parent().next("li").find("> .collapsible").focus():a(this).parent().next("li").find("> a").focus();break;case c.home:b.preventDefault(),a(this).closest("ul").find("> li:first-child > a").focus();break;case c.end:b.preventDefault(),a(this).closest("ul").find("> li:last-child > a").focus()}}),a(b).on("click",".bullet.expandable, .bullet.collapsible",function(b){"true"==a("~ ul",this).attr("aria-hidden")?(a("~ ul",this).attr("aria-hidden","false"),a(this).attr("aria-label","Close Submenu")):(a("~ ul",this).attr("aria-hidden","true"),a(this).attr("aria-label","Open Submenu"))}),a(b).on("keydown",".bullet.expandable, .bullet.collapsible",function(b){switch(b.keyCode){case c.up:case c.left:b.preventDefault(),a(this).parent().is(":first-child")?a(this).closest("ul").find("> li:last-child > a").focus():a(this).parent().prev("li").find("> a").focus();break;case c.down:case c.right:b.preventDefault(),a("~ a",this).focus();break;case c.space:case c.enter:b.preventDefault(),a(this).trigger("click"),a("~ ul > li:first-child > a",this).focus()}}),a(b).on("keydown",".ui-widget-detail ul li.expandable > ul a, .ui-widget-detail ul li.collapsible > ul a",function(b){switch(b.keyCode){case c.esc:b.preventDefault(),a(this).closest("ul").parent().find(".bullet").trigger("click").next("a").focus(),a(this).closest("ul").parent().find(".bullet").hasClass("expandable")?a(this).closest("ul").parent().find(".bullet").attr("aria-label","Open Submenu"):a(this).closest("ul").parent().find(".bullet").attr("aria-label","Close Submenu"),a(this).closest("ul").attr("aria-hidden","true"==a("~ ul",this).attr("aria-hidden")?"false":"true")}})}var b=this,c={tab:9,enter:13,esc:27,space:32,end:35,home:36,left:37,up:38,right:39,down:40};d(),e()})}}(jQuery);