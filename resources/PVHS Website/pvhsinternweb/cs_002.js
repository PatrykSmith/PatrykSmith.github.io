// RESPONSIVE PHOTO GALLERY ROTATOR | INCLUDES CUSTOM JQUERY MOBILE SCRIPT FOR SWIPE EVENTS
// AUTHOR BRENTON KELLY - CREATIVE DEVELOPMENT MANAGER - BLACKBOARD, INC.
// VERSION 9.26.16

!function($){$.fn.creativeGalleryRotate=function(settings){var config={efficientLoad:"yes",imageWidth:960,imageHeight:405,appHeader:"no",titles:"no",captions:"no",playPause:"no",mainControls:"no",galleryOverlay:"no",linkedElement:["image"],contMoreLink:"no",contMoreLinkText:"Read More",descMoreLink:"no",descMoreLinkText:"Read More",bullets:"no",bulletControls:"no",thumbnails:"no",thumbnailWidth:122,thumbnailHeight:52,thumbnailSlideDirection:"horizontal",hoverPause:"yes",fullScreenRotator:"no",fullScreenBreakpoints:["960","768","640","480","320"],autoRotate:"yes",transitionType:"fade",transitionSpeed:2,customResize:"no",customResizeFunction:function(a){},onImageLoad:function(){},allImagesLoaded:function(){},onThumbnailLoad:function(){},allThumbnailsLoaded:function(){},onTransitionStart:function(){},onTransitionEnd:function(){},allLoaded:function(){}};return settings&&$.extend(config,settings),this.each(function(){function gatherMedia(){var a="";if("fade"==config.transitionType)for(var b=0;b<recordNum;b++){var c=0==b?" first active":"";if(recordNum>1)var d=1==b?" next":"",e="yes"==config.efficientLoad&&2==b?" next-load":"",f=b==recordNum-1?" last prev":"";else var d="",f="",e="";var g=myJSON.Album.Images[b].src.split("?"),h=myJSON.Album.lgpath+g[0];a+='<li class="image loading hidden'+c+d+f+e+'">',a+='<span class="record-src hidden">'+h+"</span>",a+='<span class="record-title hidden">'+myJSON.Album.Images[b].photoname+"</span>",a+='<span class="record-link hidden">'+myJSON.Album.Images[b].link+"</span>",a+='<span class="record-link-target hidden">'+myJSON.Album.Images[b].target+"</span>",a+='<div class="loader">Loading</div>',a+="</li>"}else if("slide"==config.transitionType)if(1==recordNum)for(var i=myJSON.Album.Images[0].src.split("?"),j=myJSON.Album.lgpath+i[0],b=0;b<3;b++){var k=1==b?"image loading active":"image loading";a+='<li class="'+k+'">',a+='<span class="record-src hidden">'+j+"</span>",a+='<span class="record-title hidden">'+myJSON.Album.Images[0].photoname+"</span>",a+='<span class="record-link hidden">'+myJSON.Album.Images[0].link+"</span>",a+='<span class="record-link-target hidden">'+myJSON.Album.Images[0].target+"</span>",a+='<div class="loader">Loading</div>',a+="</li>"}else if(2==recordNum)for(var b=0,l=1;b<4;b++){var k=0==b?"image loading prev":1==b?"image loading active":2==b?"image loading next":"yes"==config.efficientLoad&&3==b?"image loading next-load":"image loading",g=myJSON.Album.Images[l].src.split("?"),h=myJSON.Album.lgpath+g[0];a+='<li class="'+k+'" index="'+l+'">',a+='<span class="record-src hidden">'+h+"</span>",a+='<span class="record-title hidden">'+myJSON.Album.Images[l].photoname+"</span>",a+='<span class="record-link hidden">'+myJSON.Album.Images[l].link+"</span>",a+='<span class="record-link-target hidden">'+myJSON.Album.Images[l].target+"</span>",a+="</li>",1==l?l=0:l++}else if(3==recordNum)for(var b=0,l=2;b<6;b++){var k=0==b?"image loading prev":1==b?"image loading active":2==b?"image loading next":"yes"==config.efficientLoad&&3==b?"image loading next-load":"image loading",g=myJSON.Album.Images[l].src.split("?"),h=myJSON.Album.lgpath+g[0];a+='<li class="'+k+'" index="'+l+'">',a+='<span class="record-src hidden">'+h+"</span>",a+='<span class="record-title hidden">'+myJSON.Album.Images[l].photoname+"</span>",a+='<span class="record-link hidden">'+myJSON.Album.Images[l].link+"</span>",a+='<span class="record-link-target hidden">'+myJSON.Album.Images[l].target+"</span>",a+="</li>",2==l?l=0:l++}else for(var b=0,l=recordNum-1;b<recordNum;b++){var k=0==b?"image loading prev":1==b?"image loading active":2==b?"image loading next":"yes"==config.efficientLoad&&3==b?"image loading next-load":"image loading",g=myJSON.Album.Images[l].src.split("?"),h=myJSON.Album.lgpath+g[0];a+='<li class="'+k+'" index="'+l+'">',a+='<span class="record-src hidden">'+h+"</span>",a+='<span class="record-title hidden">'+myJSON.Album.Images[l].photoname+"</span>",a+='<span class="record-link hidden">'+myJSON.Album.Images[l].link+"</span>",a+='<span class="record-link-target hidden">'+myJSON.Album.Images[l].target+"</span>",a+="</li>",l==recordNum-1?l=0:l++}buildStructure(a)}function buildStructure(a){var b="";if(b='<div class="ui-widget-detail">',b+='   <div class="rs-photo-gallery-container" id="rs-photo-gallery-container-'+elemID+'">',b+='   <div class="rs-photo-gallery-images">',b+='       <ul class="rs-photo-gallery-images-list">'+a+"</ul>",b+="   </div>","yes"==config.thumbnails&&recordNum>1){for(var c="",d=0;d<recordNum;d++){var e=0==d?" first active":"";if(recordNum>1)var f=1==d?" next":"",g=d==recordNum-1?" last prev":"";else var f="",g="";var h=myJSON.Album.Images[d].src.split("?"),i=myJSON.Album.lgpath+h[0];c+='<li class="rs-photo-gallery-thumbnail thumbnail-image loading hidden'+e+f+g+'" role="button" tabindex="0" aria-label="Navigate to Slide '+(d+1)+'">',c+='<span class="thumbnail-src hidden">'+i+"</span>",c+='<span class="thumbnail-title hidden">'+myJSON.Album.Images[d].photoname+"</span>",c+="</li>"}b+='<div class="rs-photo-gallery-thumbnails-outer">',b+='<div class="rs-photo-gallery-thumb-control back hidden" role="button" tabindex="0" aria-label="Scroll Thumbnails Backward"></div>',b+='<div class="rs-photo-gallery-thumbnails">',b+='<ul class="rs-photo-gallery-thumbnail-list">'+c+"</ul>",b+="</div>",b+='<div class="rs-photo-gallery-thumb-control next hidden" role="button" tabindex="0" aria-label="Scroll Thumbnails Forward"></div>',b+="</div>"}if("yes"==config.bullets&&recordNum>1){b+='<div class="rs-photo-gallery-bullets-outer">',b+='\t<div class="rs-photo-gallery-bullets ui-clear">',"yes"==config.bulletControls&&(b+='<div class="rs-photo-gallery-bullet-control back" role="button" tabindex="0" aria-label="Navigate to Previous Slide"></div>');for(var j=1;j<=recordNum;j++)b+=1==j?'<div class="rs-photo-gallery-bullet active first" role="button" tabindex="0" aria-label="Navigate to Slide '+j+'"></div>':2==j&&j==recordNum?'<div class="rs-photo-gallery-bullet next prev last" role="button" tabindex="0" aria-label="Navigate to Slide '+j+'"></div>':2==j?'<div class="rs-photo-gallery-bullet next" role="button" tabindex="0" aria-label="Navigate to Slide '+j+'"></div>':j==recordNum?'<div class="rs-photo-gallery-bullet prev last" role="button" tabindex="0" aria-label="Navigate to Slide '+j+'"></div>':'<div class="rs-photo-gallery-bullet" role="button" tabindex="0" aria-label="Navigate to Slide '+j+'"></div>';"yes"==config.bulletControls&&(b+='<div class="rs-photo-gallery-bullet-control next" role="button" tabindex="0" aria-label="Navigate to Next Slide"></div>'),b+="</div>",b+="</div>"}"yes"!=config.titles&&"yes"!=config.captions&&"yes"!=config.descMoreLink||("yes"==config.titles&&"no"==config.captions?b+="hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()?"yes"==config.descMoreLink?""==jQuery.trim(myJSON.Album.Images[0].link)?'<div class="rs-photo-gallery-desc hidden">':'<div class="rs-photo-gallery-desc">':'<div class="rs-photo-gallery-desc hidden">':'<div class="rs-photo-gallery-desc">':"no"==config.titles&&"yes"==config.captions?b+="hide"==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()?"yes"==config.descMoreLink?""==jQuery.trim(myJSON.Album.Images[0].link)?'<div class="rs-photo-gallery-desc hidden">':'<div class="rs-photo-gallery-desc">':'<div class="rs-photo-gallery-desc hidden">':'<div class="rs-photo-gallery-desc">':"yes"==config.titles&&"yes"==config.captions&&(b+="hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()&&"hide"==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()||"hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()&&""==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()?"yes"==config.descMoreLink?""==jQuery.trim(myJSON.Album.Images[0].link)?'<div class="rs-photo-gallery-desc hidden">':'<div class="rs-photo-gallery-desc">':'<div class="rs-photo-gallery-desc hidden">':'<div class="rs-photo-gallery-desc">'),"yes"==config.titles&&(b+='<div class="rs-photo-gallery-title">',"hide"==jQuery.trim(myJSON.Album.Images[0].photoname).toLowerCase()?b+='   <div class="rs-photo-title active hidden"></div>':(b+='   <div class="rs-photo-title active">',b+=""!=jQuery.trim(myJSON.Album.Images[0].link)&&($.inArray("title",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)?'<h1><a href="'+jQuery.trim(myJSON.Album.Images[0].link)+'" target="'+myJSON.Album.Images[0].target+'">'+jQuery.trim(myJSON.Album.Images[0].photoname)+"</a></h1>":"<h1>"+jQuery.trim(myJSON.Album.Images[0].photoname)+"</h1>",b+="</div>"),recordNum>1&&("hide"==jQuery.trim(myJSON.Album.Images[1].photoname).toLowerCase()?b+='   <div class="rs-photo-title next hidden"></div>':(b+='   <div class="rs-photo-title next">',b+=""!=jQuery.trim(myJSON.Album.Images[1].link)&&($.inArray("title",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)?'<h1><a href="'+jQuery.trim(myJSON.Album.Images[1].link)+'" target="'+myJSON.Album.Images[1].target+'">'+jQuery.trim(myJSON.Album.Images[1].photoname)+"</a></h1>":"<h1>"+jQuery.trim(myJSON.Album.Images[1].photoname)+"</h1>",b+="   </div>")),b+="</div>"),"yes"==config.captions&&(b+='<div class="rs-photo-gallery-caption">',"hide"==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[0].caption).toLowerCase()?b+='   <div class="rs-photo-caption active hidden"></div>':(b+='   <div class="rs-photo-caption active">',b+="       <p>"+jQuery.trim(myJSON.Album.Images[0].caption)+"</p>",b+="   </div>"),recordNum>1&&("hide"==jQuery.trim(myJSON.Album.Images[1].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[1].caption).toLowerCase()?b+='   <div class="rs-photo-caption next hidden"></div>':(b+='   <div class="rs-photo-caption next">',b+="       <p>"+jQuery.trim(myJSON.Album.Images[1].caption)+"</p>",b+="   </div>")),b+="</div>")),"yes"!=config.titles&&"yes"!=config.captions||("yes"==config.descMoreLink&&(b+=""!=jQuery.trim(myJSON.Album.Images[0].link)?'<div class="rs-photo-gallery-desc-more-link"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'"><span>'+config.descMoreLinkText+"</span></a></div>":'<div class="rs-photo-gallery-desc-more-link hidden" style="display: none;"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'"><span>'+config.descMoreLinkText+"</span></a></div>"),b+="</div>"),recordNum>1&&("yes"==config.mainControls&&(b+='<div class="rs-photo-gallery-control back" role="button" tabindex="0" aria-label="Navigate to Previous Slide"></div>',b+='<div class="rs-photo-gallery-control next" role="button" tabindex="0" aria-label="Navigate to Next Slide"></div>'),"yes"==config.playPause&&(b+='<div class="rs-photo-gallery-control play-pause playing" role="button" tabindex="0" aria-label="Pause Gallery"></div>')),"yes"==config.contMoreLink&&(b+=""!=jQuery.trim(myJSON.Album.Images[0].link)?'<div class="rs-photo-gallery-more-link"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'"><span>'+config.contMoreLinkText+"</span></a></div>":'<div class="rs-photo-gallery-more-link hidden" style="display: none;"><a href="'+myJSON.Album.Images[0].link+'" target="'+myJSON.Album.Images[0].target+'"><span>'+config.contMoreLinkText+"</span></a></div>"),"yes"==config.galleryOverlay&&(b+=""!=jQuery.trim(myJSON.Album.Images[0].link)&&$.inArray("overlay",config.linkedElement)>-1||""!=jQuery.trim(myJSON.Album.Images[0].link)&&$.inArray("all",config.linkedElement)>-1?'<a class="rs-photo-gallery-overlay" href="'+jQuery.trim(myJSON.Album.Images[0].link)+'" target="'+myJSON.Album.Images[0].target+'" tabindex="0" aria-label="Click to Read More About This Slide"></a>':'<a class="rs-photo-gallery-overlay" href="#" onclick="return false;" style="cursor: default;" tabindex="-1" aria-label="Click to Read More About This Slide"></a>'),b+="</div></div>",$(element).append(b),"slide"==config.transitionType&&sliderDimReset()}function loadInitImages(){loadImage(!0,0),"slide"==config.transitionType&&1==recordNum?(loadImage(!0,1),loadImage(!0,2)):recordNum>1&&loadImage(!0,1),"slide"==config.transitionType&&recordNum>=2&&loadImage(!0,2)}function loadImage(a,b){var c=1==a?$(".image.loading",element).eq(b):$(".image.loading.next-load",element),d=jQuery.trim($(".record-link",c).text()),e=jQuery.trim($(".record-link-target",c).text());"hide"==jQuery.trim($(".record-title",c).text()).toLowerCase()?"":'title="'+jQuery.trim($(".record-title",c).text())+'"';$('<img src="'+jQuery.trim($(".record-src",c).text())+'" alt="'+jQuery.trim($(".record-title",c).text())+'" />').one("load",function(){$(".record-src, .record-title, .record-link, .record-link-target, .loader",c).remove(),c.removeClass("loading hidden next-load").prepend($(this)),""!=d&&($.inArray("image",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)&&c.children("img").wrapAll("<a href='"+d+"' target='"+e+"' tabindex='"+(c.hasClass("active")?"0":"-1")+"'></a>"),windowResize(),config.onImageLoad.call(this),$(".image.loading",element).length||config.allImagesLoaded.call(this)})}function loadImages(){$(".image.loading",element).each(function(){var a=$(this),b=jQuery.trim($(".record-link",a).text()),c=jQuery.trim($(".record-link-target",a).text());"hide"==jQuery.trim($(".record-title",a).text()).toLowerCase()?"":'title="'+jQuery.trim($(".record-title",a).text())+'"';$('<img src="'+jQuery.trim($(".record-src",a).text())+'" alt="'+jQuery.trim($(".record-title",a).text())+'" />').one("load",function(){$(".record-src, .record-title, .record-link, .record-link-target, .loader",a).remove(),a.removeClass("loading hidden").prepend($(this)),""!=b&&($.inArray("image",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)&&a.children("img").wrapAll("<a href='"+b+"' target='"+c+"' tabindex='"+(a.hasClass("active")?"0":"-1")+"'></a>"),windowResize(),config.onImageLoad.call(this),$(".image.loading",element).length||config.allImagesLoaded.call(this)})})}function batchImageLoad(){$(".image.batch-item",element).each(function(){var a=$(this),b=jQuery.trim($(".record-link",a).text()),c=jQuery.trim($(".record-link-target",a).text());"hide"==jQuery.trim($(".record-title",a).text()).toLowerCase()?"":'title="'+jQuery.trim($(".record-title",a).text())+'"';$('<img src="'+jQuery.trim($(".record-src",a).text())+'" alt="'+jQuery.trim($(".record-title",a).text())+'" />').one("load",function(){$(".record-src, .record-title, .record-link, .record-link-target, .loader",a).remove(),a.removeClass("loading hidden batch-item").prepend($(this)),""!=b&&($.inArray("image",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)&&a.children("img").wrapAll("<a href='"+b+"' target='"+c+"' tabindex='"+(a.hasClass("active")?"0":"-1")+"'></a>"),config.onImageLoad.call(this),$(".image.loading",element).length||config.allImagesLoaded.call(this)})})}function loadThumbs(){"yes"==config.thumbnails&&recordNum>1&&$(".thumbnail-image.loading",element).each(function(){var a=$(this),b="hide"==jQuery.trim($(".thumbnail-title",a).text()).toLowerCase()?"":'title="'+jQuery.trim($(".thumbnail-title",a).text())+'"';$('<img src="'+jQuery.trim($(".thumbnail-src",a).text())+'" '+b+' alt="'+jQuery.trim($(".thumbnail-title",a).text())+'" />').one("load",function(){if($(".thumbnail-src, .thumbnail-title",a).remove(),a.removeClass("loading hidden").prepend($(this)),config.onThumbnailLoad.call(this),!$(".thumbnail-image.loading",element).length)if(config.allThumbnailsLoaded.call(this),"vertical"==config.thumbnailSlideDirection){var b=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0);$(".rs-photo-gallery-thumbnails-outer",element).css("width",b+"px"),$(".rs-photo-gallery-thumbnails",element).css("width",b+"px");var c=$(".rs-photo-gallery-thumbnails",element).outerHeight(!0),d=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0);if(d>c){var e=$(".rs-photo-gallery-thumb-control.back",element).outerHeight(!0)+10,f=$(".rs-photo-gallery-thumb-control.next",element).outerHeight(!0)+10;$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({top:e+"px",bottom:f+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-top":"0px","padding-bottom":"0px","margin-top":"0px","margin-bottom":"0px"})}}else if("horizontal"==config.thumbnailSlideDirection){var g=0;$(".rs-photo-gallery-thumbnail",element).each(function(){g+=$(this).outerWidth(!0)}),$(".rs-photo-gallery-thumbnail-list",element).css("width",g+"px");var h=$(".rs-photo-gallery-thumbnails",element).outerWidth(!0),b=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0);if(b>h){var i=$(".rs-photo-gallery-thumb-control.back",element).outerWidth(!0)+10,j=$(".rs-photo-gallery-thumb-control.next",element).outerWidth(!0)+10;$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({left:i+"px",right:j+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-left":"0px","padding-right":"0px","margin-left":"0px","margin-right":"0px"})}var d=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0);$(".rs-photo-gallery-thumbnails-outer",element).css("height",d+"px"),$(".rs-photo-gallery-thumbnails",element).css("height",d+"px");var k=d/2;$(".rs-photo-gallery-thumb-control",element).css("padding-top",k+"px")}})})}function galleryEvents(){$(document).on("keydown",function(a){setTimeout(function(){$("#rs-photo-gallery-container-"+elemID).find(":focus").length?($(".rs-photo-gallery-container",element).addClass("cs-hover"),timerStop()):$(".rs-photo-gallery-container",element).hasClass("cs-hover")&&($(".rs-photo-gallery-container",element).removeClass("cs-hover"),timerStop(),timerReset())},100)}),"yes"==config.mainControls&&($(".rs-photo-gallery-control",element).click(function(){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset())}),$(".rs-photo-gallery-control",element).keydown(function(a){a.keyCode!=csKeyCodes.space&&a.keyCode!=csKeyCodes.enter||(a.preventDefault(),$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset()))})),$("#rs-photo-gallery-container-"+elemID).on("swiperight",function(a){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),galleryAnimate("prev"),timerReset())}),$("#rs-photo-gallery-container-"+elemID).on("swipeleft",function(a){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),galleryAnimate("next"),timerReset())}),"yes"==config.bulletControls&&($(".rs-photo-gallery-bullet-control",element).click(function(){$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset())}),$(".rs-photo-gallery-bullet-control",element).keydown(function(a){a.keyCode!=csKeyCodes.space&&a.keyCode!=csKeyCodes.enter||(a.preventDefault(),$(".rs-photo-gallery-container",element).hasClass("animating")||(timerStop(),$(this).hasClass("next")?galleryAnimate("next"):$(this).hasClass("back")&&galleryAnimate("prev"),timerReset()))})),"yes"==config.bullets&&($(".rs-photo-gallery-bullet",element).click(function(){if(!$(this).hasClass("active")&&!$(".rs-photo-gallery-container",element).hasClass("animating")){var a=$(this).index();timerStop(),bulletGalleryAnimate(a),timerReset()}}),$(".rs-photo-gallery-bullet",element).keydown(function(a){switch(a.keyCode){case csKeyCodes.left:case csKeyCodes.up:a.preventDefault(),$(this).hasClass("first")?$(this).parent().find(".rs-photo-gallery-bullet.last").focus():$(this).prev(".rs-photo-gallery-bullet").focus();break;case csKeyCodes.right:case csKeyCodes.down:a.preventDefault(),$(this).hasClass("last")?$(this).parent().find(".rs-photo-gallery-bullet.first").focus():$(this).next(".rs-photo-gallery-bullet").focus();break;case csKeyCodes.home:a.preventDefault(),$(this).parent().find(".rs-photo-gallery-bullet.last").focus();break;case csKeyCodes.end:a.preventDefault(),$(this).parent().find(".rs-photo-gallery-bullet.first").focus();break;case csKeyCodes.space:case csKeyCodes.enter:if(a.preventDefault(),!$(this).hasClass("active")&&!$(".rs-photo-gallery-container",element).hasClass("animating")){var b=$(this).index();timerStop(),bulletGalleryAnimate(b),timerReset()}}})),"yes"==config.thumbnails&&($("#rs-photo-gallery-container-"+elemID).on("click keydown",".rs-photo-gallery-thumb-control",function(a){if(("click"==a.type||"keydown"==a.type&&a.keyCode==csKeyCodes.enter||"keydown"==a.type&&a.keyCode==csKeyCodes.space)&&(a.preventDefault(),!$(".rs-photo-gallery-thumbnails-outer",element).hasClass("animating")))if($(".rs-photo-gallery-thumbnails-outer",element).addClass("animating"),"horizontal"==config.thumbnailSlideDirection){var b=$(".thumbnail-image",element).outerWidth(!0),c=$(".thumbnail-image.first",element).outerWidth(!0),d=$(".thumbnail-image.last",element).outerWidth(!0),e=parseInt($(".rs-photo-gallery-thumbnail-list",element).css("left"))*-1,f=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0)-$(".rs-photo-gallery-thumbnails",element).outerWidth(!0),g=f-e,h=0;$(this).hasClass("next")?(h=g<d?e+g:e+b,$(".rs-photo-gallery-thumbnail-list",element).animate({left:"-"+h+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")})):$(this).hasClass("back")&&(h=e<c?0:e-b,$(".rs-photo-gallery-thumbnail-list",element).animate({left:"-"+h+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")}))}else if("vertical"==config.thumbnailSlideDirection){var b=$(".thumbnail-image",element).outerHeight(!0),c=$(".thumbnail-image.first",element).outerHeight(!0),d=$(".thumbnail-image.last",element).outerHeight(!0),e=parseInt($(".rs-photo-gallery-thumbnail-list",element).css("top"))*-1,f=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0)-$(".rs-photo-gallery-thumbnails",element).outerHeight(!0),g=f-e,h=0;$(this).hasClass("next")?(h=g<d?e+g:e+b,$(".rs-photo-gallery-thumbnail-list",element).animate({top:"-"+h+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")})):$(this).hasClass("back")&&(h=e<c?0:e-b,$(".rs-photo-gallery-thumbnail-list",element).animate({top:"-"+h+"px"},400,function(){$(".rs-photo-gallery-thumbnails-outer",element).removeClass("animating")}))}}),$(".rs-photo-gallery-thumbnail",element).click(function(){if(!$(this).hasClass("active")&&!$(".rs-photo-gallery-container",element).hasClass("animating")){var a=$(this).index();"yes"==config.autoRotate&&clearInterval(galleryTimer[elemID]),thumbnailGalleryAnimate(a),timerReset()}}),$(".rs-photo-gallery-thumbnail",element).keydown(function(a){switch(a.keyCode){case csKeyCodes.left:case csKeyCodes.up:a.preventDefault(),$(this).hasClass("first")?$(this).parent().find(".rs-photo-gallery-thumbnail.last").focus():$(this).prev(".rs-photo-gallery-thumbnail").focus();break;case csKeyCodes.right:case csKeyCodes.down:a.preventDefault(),$(this).hasClass("last")?$(this).parent().find(".rs-photo-gallery-thumbnail.first").focus():$(this).next(".rs-photo-gallery-thumbnail").focus();break;case csKeyCodes.home:a.preventDefault(),$(this).parent().find(".rs-photo-gallery-thumbnail.last").focus();break;case csKeyCodes.end:a.preventDefault(),$(this).parent().find(".rs-photo-gallery-thumbnail.first").focus();break;case csKeyCodes.space:case csKeyCodes.enter:if(a.preventDefault(),!$(this).hasClass("active")&&!$(".rs-photo-gallery-container",element).hasClass("animating")){var b=$(this).index();"yes"==config.autoRotate&&clearInterval(galleryTimer[elemID]),thumbnailGalleryAnimate(b),timerReset()}}})),$(".rs-photo-gallery-container",element).hover(function(){$(this).addClass("cs-hover"),timerStop()},function(){$("#rs-photo-gallery-container-"+elemID).find(":focus").length||($(this).removeClass("cs-hover"),timerStop(),timerReset())}),$(".rs-photo-gallery-container",element).on("touchend",function(a){$("#rs-photo-gallery-container-"+elemID).find(":focus").length||($(this).removeClass("cs-hover"),timerStop(),timerReset())}),$(".rs-photo-gallery-control.play-pause",element).click(function(){$(this).hasClass("playing")?($(this).removeClass("playing").addClass("paused").attr("aria-label","Play Gallery"),timerStop()):$(this).hasClass("paused")&&($(this).removeClass("paused").addClass("playing").attr("aria-label","Pause Gallery"),$("#rs-photo-gallery-container-"+elemID).find(":focus").length||(timerStop(),timerReset()))}),$(".rs-photo-gallery-control.play-pause",element).keydown(function(a){a.keyCode!=csKeyCodes.space&&a.keyCode!=csKeyCodes.enter||(a.preventDefault(),$(this).hasClass("playing")?($(this).removeClass("playing").addClass("paused").attr("aria-label","Play Gallery"),timerStop()):$(this).hasClass("paused")&&($(this).removeClass("paused").addClass("playing").attr("aria-label","Pause Gallery"),$("#rs-photo-gallery-container-"+elemID).find(":focus").length||(timerStop(),timerReset())))}),"yes"!=config.fullScreenRotator&&$(element).parents(".region").children().on("click",function(){windowResize()})}function timerReset(){"yes"==config.playPause?$(".rs-photo-gallery-control.play-pause",element).hasClass("playing")&&!$(".rs-photo-gallery-container",element).hasClass("cs-hover")&&"yes"==config.autoRotate&&galleryTimer():$(".rs-photo-gallery-container",element).hasClass("cs-hover")||"yes"==config.autoRotate&&galleryTimer()}function timerStop(){"yes"==config.autoRotate&&clearInterval(galleryTimer[elemID])}function galleryRotate(){galleryAnimate($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).hasClass("last")?"first":"next")}function galleryAnimate(a){if($(".rs-photo-gallery-container",element).addClass("animating"),"next"==a){if(config.onTransitionStart.call(this),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading.next-load",element).length&&loadImage(),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.prev",element).removeClass("prev"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.prev",element).removeClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),"fade"==config.transitionType){var b=$(".rs-photo-gallery-images-list li.next",element).index();updateMoreLinks(b),updateOverlay(b),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)})}else if("slide"==config.transitionType){var b=$(".rs-photo-gallery-images-list li.next",element).attr("index");updateMoreLinks(b),updateOverlay(b);var c=parseInt($(".rs-photo-gallery-images-list",element).css("left"))*-1;if("yes"==config.fullScreenRotator)var d=$(window).width();else var d=$(element).width()>config.imageWidth?config.imageWidth:$(element).width();var e=c+d,b=$(".rs-photo-gallery-images-list li.next",element).attr("index");$(".rs-photo-gallery-images-list",element).animate({left:"-"+e+"px"},1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images-list",element).append($(".rs-photo-gallery-images-list li",element).eq(0)),$(".rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)})}}else if("prev"==a){if(config.onTransitionStart.call(this),"yes"==config.efficientLoad&&"fade"==config.transitionType&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.prev",element).hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.prev",element).addClass("next-load"),loadImage())),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.next",element).removeClass("next"),$(".rs-photo-gallery-bullet.prev",element).removeClass("prev").addClass("next"),$(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),
$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.next",element).removeClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).removeClass("prev").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),"slide"==config.transitionType&&($(".rs-photo-gallery-images-list",element).prepend($(".rs-photo-gallery-images-list li",element).last()),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).first().hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).first().addClass("next-load"),loadImage())),sliderDimReset()),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).removeClass("prev").addClass("next"),"fade"==config.transitionType)var f=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index();else if("slide"==config.transitionType)var f=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).attr("index");if("yes"==config.titles&&("hide"==jQuery.trim(myJSON.Album.Images[f].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden"):""!=jQuery.trim(myJSON.Album.Images[f].link)&&($.inArray("title",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[f].link)+"' target='"+myJSON.Album.Images[f].target+"'>"+jQuery.trim(myJSON.Album.Images[f].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[f].photoname)+"</h1>").removeClass("hidden").removeAttr("style")),"yes"==config.captions&&("hide"==jQuery.trim(myJSON.Album.Images[f].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[f].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[f].caption)+"</p>").removeClass("hidden").removeAttr("style")),"fade"==config.transitionType){var b=$(".rs-photo-gallery-images-list li.next",element).index();updateMoreLinks(b),updateOverlay(b),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)})}else if("slide"==config.transitionType){var b=$(".rs-photo-gallery-images-list li.active",element).prev(".image").attr("index");updateMoreLinks(b),updateOverlay(b);var c=parseInt($(".rs-photo-gallery-images-list",element).css("left"))*-1;if("yes"==config.fullScreenRotator)var d=$(window).width();else var d=$(element).width()>config.imageWidth?config.imageWidth:$(element).width();var e=c-d,b=$(".rs-photo-gallery-images-list li."+a,element).index()-1;$(".rs-photo-gallery-images-list",element).animate({left:"-"+e+"px"},1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)})}}else"first"==a&&(config.onTransitionStart.call(this),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.prev",element).removeClass("prev"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.prev",element).removeClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),updateMoreLinks(0),updateOverlay(0),"fade"==config.transitionType&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load")),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)}));"yes"!=config.titles&&"yes"!=config.captions||fadeTitlesCaptions()}function bulletGalleryAnimate(a){if($(".rs-photo-gallery-container",element).addClass("animating"),"yes"==config.bulletControls&&(a-=1),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).removeClass("prev").removeClass("next"),$(".rs-photo-gallery-bullet",element).removeClass("prev").removeClass("next"),"yes"==config.thumbnails&&$(".rs-photo-gallery-thumbnail",element).removeClass("prev").removeClass("next"),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li:eq("+a+")",element).addClass("next"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).addClass("next-load"),loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))));else if("slide"==config.transitionType){var b=$(".rs-photo-gallery-bullet.active",element).index();"yes"==config.bulletControls&&(b-=1);var c=0,d="";if(a<b){d="backward",c=b-a;for(var e=0;e<c;e++){var f=$(".rs-photo-gallery-images-list li",element).eq(recordNum-1).clone().attr("class","image clone");$(".rs-photo-gallery-images-list",element).prepend(f)}sliderDimReset()}else if(a>b){d="forward",c=a-b,"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".image.loading",element).each(function(){$(this).addClass("batch-item")}));for(var e=0;e<c;e++){var f=$(".rs-photo-gallery-images-list li",element).eq(e).clone().removeClass("prev next active").addClass("clone");$(".rs-photo-gallery-images-list",element).append(f)}"yes"==config.efficientLoad&&$(".batch-item",element).length&&batchImageLoad(),sliderDimReset()}if("forward"==d)var g=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()+c;else if("backward"==d)var g=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()-c;$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).eq(g).addClass("next")}if($(".rs-photo-gallery-bullet:eq("+a+")",element).addClass("next"),"yes"==config.thumbnails&&$(".rs-photo-gallery-thumbnail:eq("+a+")",element).addClass("next"),"fade"==config.transitionType)var h=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index();else if("slide"==config.transitionType)var h=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).attr("index");if("yes"==config.titles&&("hide"==jQuery.trim(myJSON.Album.Images[h].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden"):""!=jQuery.trim(myJSON.Album.Images[h].link)&&($.inArray("title",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[h].link)+"' target='"+myJSON.Album.Images[h].target+"'>"+jQuery.trim(myJSON.Album.Images[h].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[h].photoname)+"</h1>").removeClass("hidden").removeAttr("style")),"yes"==config.captions&&("hide"==jQuery.trim(myJSON.Album.Images[h].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[h].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[h].caption)+"</p>").removeClass("hidden").removeAttr("style")),$(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev"),"yes"==config.thumbnails&&($(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev")),updateMoreLinks(h),updateOverlay(h),config.onTransitionStart.call(this),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading.next-load",element).length&&loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)});else if("slide"==config.transitionType){if("yes"==config.fullScreenRotator)var i=$(window).width();else var i=$(element).width()>config.imageWidth?config.imageWidth:$(element).width();var j=$(".rs-photo-gallery-images-list li.next",element).index(),k=i*j;$(".rs-photo-gallery-images-list",element).animate({left:"-"+k+"px"},1e3*config.transitionSpeed,function(){if($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.clone",element).remove(),"backward"==d){for(var b=0;b<c;b++)$(".rs-photo-gallery-images-list",element).prepend($(".rs-photo-gallery-images-list li",element).last());sliderDimReset()}else if("forward"==d){for(var b=0;b<c;b++)$(".rs-photo-gallery-images-list",element).append($(".rs-photo-gallery-images-list li",element).first());sliderDimReset()}$(".rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next"),$(".rs-photo-gallery-images-list li[index='"+a+"']",element).first().addClass("active"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)})}"yes"!=config.titles&&"yes"!=config.captions||fadeTitlesCaptions()}function thumbnailGalleryAnimate(a){if($(".rs-photo-gallery-container",element).addClass("animating"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).removeClass("prev").removeClass("next"),"yes"==config.bullets&&$(".rs-photo-gallery-bullet",element).removeClass("prev").removeClass("next"),$(".rs-photo-gallery-thumbnail",element).removeClass("prev").removeClass("next"),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li:eq("+a+")",element).addClass("next"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).hasClass("loading")&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).addClass("next-load"),loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))));else if("slide"==config.transitionType){var b=$(".rs-photo-gallery-thumbnail.active",element).index(),c=0,d="";if(a<b){d="backward",c=b-a;for(var e=0;e<c;e++){var f=$(".rs-photo-gallery-images-list li",element).eq(recordNum-1).clone().attr("class","image clone");$(".rs-photo-gallery-images-list",element).prepend(f)}sliderDimReset()}else if(a>b){d="forward",c=a-b,"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".image.loading",element).each(function(){$(this).addClass("batch-item")}));for(var e=0;e<c;e++){var f=$(".rs-photo-gallery-images-list li",element).eq(e).clone().attr("class","image clone");$(".rs-photo-gallery-images-list",element).append(f)}"yes"==config.efficientLoad&&$(".batch-item",element).length&&batchImageLoad(),sliderDimReset()}if("forward"==d)var g=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()+c;else if("backward"==d)var g=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).index()-c;$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).eq(g).addClass("next")}if("yes"==config.bullets&&$(".rs-photo-gallery-bullet:eq("+a+")",element).addClass("next"),$(".rs-photo-gallery-thumbnail:eq("+a+")",element).addClass("next"),"fade"==config.transitionType)var h=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index();else if("slide"==config.transitionType)var h=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).attr("index");if("yes"==config.titles&&("hide"==jQuery.trim(myJSON.Album.Images[h].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden"):""!=jQuery.trim(myJSON.Album.Images[h].link)&&($.inArray("title",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[h].link)+"' target='"+myJSON.Album.Images[h].target+"'>"+jQuery.trim(myJSON.Album.Images[h].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[h].photoname)+"</h1>").removeClass("hidden").removeAttr("style")),"yes"==config.captions&&("hide"==jQuery.trim(myJSON.Album.Images[h].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[h].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[h].caption)+"</p>").removeClass("hidden").removeAttr("style")),"yes"==config.bullets&&($(".rs-photo-gallery-bullet.active",element).removeClass("active"),$(".rs-photo-gallery-bullet.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-bullet.active",element).next(".rs-photo-gallery-bullet").addClass("next"),$(".rs-photo-gallery-bullet.active",element).prev(".rs-photo-gallery-bullet").addClass("prev"),$(".rs-photo-gallery-bullet.next",element).length||$(".rs-photo-gallery-bullet.first",element).addClass("next"),$(".rs-photo-gallery-bullet.prev",element).length||$(".rs-photo-gallery-bullet.last",element).addClass("prev")),$(".rs-photo-gallery-thumbnail.active",element).removeClass("active"),$(".rs-photo-gallery-thumbnail.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-thumbnail.active",element).next(".rs-photo-gallery-thumbnail").addClass("next"),$(".rs-photo-gallery-thumbnail.active",element).prev(".rs-photo-gallery-thumbnail").addClass("prev"),$(".rs-photo-gallery-thumbnail.next",element).length||$(".rs-photo-gallery-thumbnail.first",element).addClass("next"),$(".rs-photo-gallery-thumbnail.prev",element).length||$(".rs-photo-gallery-thumbnail.last",element).addClass("prev"),updateMoreLinks(h),updateOverlay(h),config.onTransitionStart.call(this),"fade"==config.transitionType)$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).fadeOut(1e3*config.transitionSpeed,function(){$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).removeClass("next").addClass("active"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.first",element).addClass("next"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.prev",element).length||$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.last",element).addClass("prev"),"yes"==config.efficientLoad&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading.next-load",element).length&&loadImage(),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).length&&($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image",element).removeClass("next-load"),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.next",element).next(".rs-photo-gallery-images .rs-photo-gallery-images-list li.image.loading",element).addClass("next-load"))),$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("display",""),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)});else if("slide"==config.transitionType){if("yes"==config.fullScreenRotator)var i=$(window).width();else var i=$(element).width()>config.imageWidth?config.imageWidth:$(element).width();var j=$(".rs-photo-gallery-images-list li.next",element).index(),k=i*j;$(".rs-photo-gallery-images-list",element).animate({left:"-"+k+"px"},1e3*config.transitionSpeed,function(){if($(".rs-photo-gallery-images .rs-photo-gallery-images-list li.clone",element).remove(),"backward"==d){for(var b=0;b<c;b++)$(".rs-photo-gallery-images-list",element).prepend($(".rs-photo-gallery-images-list li",element).last());sliderDimReset()}else if("forward"==d){for(var b=0;b<c;b++)$(".rs-photo-gallery-images-list",element).append($(".rs-photo-gallery-images-list li",element).first());sliderDimReset()}$(".rs-photo-gallery-images-list li.active",element).removeClass("active"),$(".rs-photo-gallery-images-list li.prev",element).removeClass("prev"),$(".rs-photo-gallery-images-list li.next",element).removeClass("next"),$(".rs-photo-gallery-images-list li[index='"+a+"']",element).first().addClass("active"),$(".rs-photo-gallery-images-list li.active",element).next().addClass("next"),$(".rs-photo-gallery-images-list li.active",element).prev().addClass("prev"),sliderDimReset(),$(".rs-photo-gallery-container",element).removeClass("animating"),$(".rs-photo-gallery-images-list li a",element).attr("tabIndex","-1"),$(".rs-photo-gallery-images-list li.active a",element).attr("tabIndex","0"),config.onTransitionEnd.call(this)})}"yes"!=config.titles&&"yes"!=config.captions||fadeTitlesCaptions()}function fadeTitlesCaptions(){if("fade"==config.transitionType){var a=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).index()+1,b=$(".rs-photo-gallery-images ul.rs-photo-gallery-images-list li.next",element).index();a==recordNum&&(a=0)}else if("slide"==config.transitionType)var a=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li.next",element).next(".image").attr("index");var c=1e3*config.transitionSpeed/2;"yes"==config.titles&&"no"==config.captions?$(".rs-photo-title.next",element).hasClass("hidden")&&("yes"==config.descMoreLink?""==jQuery.trim(myJSON.Album.Images[b].link)&&(c=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")})):(c=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")}))):"no"==config.titles&&"yes"==config.captions?$(".rs-photo-caption.next",element).hasClass("hidden")&&("yes"==config.descMoreLink?""==jQuery.trim(myJSON.Album.Images[b].link)&&(c=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")})):(c=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")}))):"yes"==config.titles&&"yes"==config.captions&&$(".rs-photo-caption.next",element).hasClass("hidden")&&$(".rs-photo-title.next",element).hasClass("hidden")&&("yes"==config.descMoreLink?""==jQuery.trim(myJSON.Album.Images[b].link)&&(c=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")})):(c=1e3*config.transitionSpeed,$(".rs-photo-gallery-desc",element).fadeOut(1e3*config.transitionSpeed,function(){$(this).addClass("hidden").removeAttr("style")}))),"yes"==config.titles&&"no"==config.captions?$(".rs-photo-gallery-desc",element).hasClass("hidden")&&(!$(".rs-photo-title.next",element).hasClass("hidden")||"yes"==config.descMoreLink&&jQuery.trim(""!=myJSON.Album.Images[b].link))&&$(".rs-photo-gallery-desc",element).fadeIn(1e3*config.transitionSpeed,function(){$(this).removeClass("hidden").removeAttr("style")}):"no"==config.titles&&"yes"==config.captions?$(".rs-photo-gallery-desc",element).hasClass("hidden")&&(!$(".rs-photo-caption.next",element).hasClass("hidden")||"yes"==config.descMoreLink&&jQuery.trim(""!=myJSON.Album.Images[b].link))&&$(".rs-photo-gallery-desc",element).fadeIn(1e3*config.transitionSpeed,function(){$(this).removeClass("hidden").removeAttr("style")}):"yes"==config.titles&&"yes"==config.captions&&$(".rs-photo-gallery-desc",element).hasClass("hidden")&&(!$(".rs-photo-caption.next",element).hasClass("hidden")||!$(".rs-photo-title.next",element).hasClass("hidden")||"yes"==config.descMoreLink&&jQuery.trim(""!=myJSON.Album.Images[b].link))&&$(".rs-photo-gallery-desc",element).fadeIn(1e3*config.transitionSpeed,function(){$(this).removeClass("hidden").removeAttr("style")}),"yes"==config.titles&&$(".rs-photo-title.active",element).fadeOut(c,function(){var b=$(this);if($(".rs-photo-title.next",element).hasClass("hidden")){var d=$(".rs-photo-title.next",element);setNextTitle(a,d,b)}else{var e=0;$(this).hasClass("hidden")&&!$(".rs-photo-gallery-desc",element).hasClass("hidden")&&(e=1e3*config.transitionSpeed/2),$(".rs-photo-title.next",element).delay(e).fadeIn(c,function(){var c=$(this);setNextTitle(a,c,b)})}}),"yes"==config.captions&&$(".rs-photo-caption.active",element).fadeOut(c,function(){var b=$(this);if($(".rs-photo-caption.next",element).hasClass("hidden")){var d=$(".rs-photo-caption.next",element);setNextCaption(a,d,b)}else{var e=0;$(this).hasClass("hidden")&&!$(".rs-photo-gallery-desc",element).hasClass("hidden")&&(e=1e3*config.transitionSpeed/2),$(".rs-photo-caption.next",element).delay(e).fadeIn(c,function(){var c=$(this);setNextCaption(a,c,b)})}})}function setNextTitle(a,b,c){c.removeClass("active").addClass("next"),b.removeClass("next").addClass("active"),$(".rs-photo-title",element).removeAttr("style"),"hide"==jQuery.trim(myJSON.Album.Images[a].photoname).toLowerCase()?$(".rs-photo-title.next",element).empty().addClass("hidden").removeAttr("style"):""!=jQuery.trim(myJSON.Album.Images[a].link)&&($.inArray("title",config.linkedElement)>-1||$.inArray("all",config.linkedElement)>-1)?$(".rs-photo-title.next",element).html("<h1><a href='"+jQuery.trim(myJSON.Album.Images[a].link)+"' target='"+myJSON.Album.Images[a].target+"'>"+jQuery.trim(myJSON.Album.Images[a].photoname)+"</a></h1>").removeClass("hidden").removeAttr("style"):$(".rs-photo-title.next",element).html("<h1>"+jQuery.trim(myJSON.Album.Images[a].photoname)+"</h1>").removeClass("hidden").removeAttr("style")}function setNextCaption(a,b,c){c.removeClass("active").addClass("next"),b.removeClass("next").addClass("active"),$(".rs-photo-caption",element).removeAttr("style"),"hide"==jQuery.trim(myJSON.Album.Images[a].caption).toLowerCase()||""==jQuery.trim(myJSON.Album.Images[a].caption)?$(".rs-photo-caption.next",element).empty().addClass("hidden").removeAttr("style"):$(".rs-photo-caption.next",element).html("<p>"+jQuery.trim(myJSON.Album.Images[a].caption)+"</p>").removeClass("hidden").removeAttr("style")}function updateMoreLinks(a){if("yes"==config.contMoreLink)if($(".rs-photo-gallery-more-link a",element).attr("href",myJSON.Album.Images[a].link).attr("target",myJSON.Album.Images[a].target),$(".rs-photo-gallery-more-link",element).hasClass("hidden")&&""!=jQuery.trim(myJSON.Album.Images[a].link)){
var b=1e3*config.transitionSpeed/2;$(".rs-photo-gallery-more-link",element).delay(b).fadeIn(1e3*config.transitionSpeed/2,function(){$(this).removeClass("hidden")})}else $(".rs-photo-gallery-more-link",element).hasClass("hidden")||""!=jQuery.trim(myJSON.Album.Images[a].link)||$(".rs-photo-gallery-more-link",element).fadeOut(1e3*config.transitionSpeed/2,function(){$(this).addClass("hidden")});if("yes"==config.descMoreLink)if($(".rs-photo-gallery-desc-more-link a",element).attr("href",myJSON.Album.Images[a].link).attr("target",myJSON.Album.Images[a].target),$(".rs-photo-gallery-desc-more-link",element).hasClass("hidden")&&""!=jQuery.trim(myJSON.Album.Images[a].link)){var b=1e3*config.transitionSpeed/2;$(".rs-photo-gallery-desc-more-link",element).delay(b).fadeIn(1e3*config.transitionSpeed/2,function(){$(this).removeClass("hidden")})}else $(".rs-photo-gallery-desc-more-link",element).hasClass("hidden")||""!=jQuery.trim(myJSON.Album.Images[a].link)||$(".rs-photo-gallery-desc-more-link",element).fadeOut(1e3*config.transitionSpeed/2,function(){$(this).addClass("hidden")})}function updateOverlay(a){"yes"==config.galleryOverlay&&(""!=jQuery.trim(myJSON.Album.Images[a].link)&&$.inArray("overlay",config.linkedElement)>-1||""!=jQuery.trim(myJSON.Album.Images[a].link)&&$.inArray("all",config.linkedElement)>-1?$(".rs-photo-gallery-overlay",element).removeAttr("style").removeAttr("onclick").attr("href",jQuery.trim(myJSON.Album.Images[a].link)).attr("target",myJSON.Album.Images[a].target).attr("tabindex","0"):$(".rs-photo-gallery-overlay",element).css("cursor","default").attr("onclick","return false;").attr("href","#").attr("tabindex","-1"))}function galleryTimer(){var a=myJSON.Album.transitiondelay<=config.transitionSpeed?config.transitionSpeed+1:myJSON.Album.transitiondelay;galleryTimer[elemID]=setInterval(function(){galleryRotate()},1e3*a+1e3*config.transitionSpeed)}function buildStyleSheet(){var a=document.createElement("style");if(a){a.setAttribute("type","text/css");var b=document.getElementsByTagName("head")[0];b&&b.insertBefore(a,b.childNodes[0]);var c="",d="",e="",f="",g="";"fade"==config.transitionType?(e="width: 100%; height: 100%; position: static;",c="position: relative;",d="width: 100%; position: absolute; top: 0px; left: 0px; display: none;"):"slide"==config.transitionType&&(e="position: relative;",c="position: absolute; top: 0px; left: 0px;",d="float: left;",f="#rs-photo-gallery-container-"+elemID+".rs-photo-gallery-container { position: relative; }"),"yes"==config.fullScreenRotator&&(g="overflow: hidden;");var h="",i="",j="",k="",l="",m="",n="";"horizontal"==config.thumbnailSlideDirection?(h="bottom: 0px; left: 0px; right: 0px;",i="top: 0px; left: 0px; right: 0px;",j="margin-right: 10px; float: left;",k="top: 0px; bottom: 0px; left: 0px;",l="top: 0px; bottom: 0px; right: 0px;",m='content: ""; margin-top: -6.5px;',n='content: ""; margin-top: -6.5px;'):"vertical"==config.thumbnailSlideDirection&&(h="top: 0px; bottom: 0px; right: 0px;",i="left: 0px; top: 0px; bottom: 0px;",j="margin-bottom: 10px;",k="top: 0px; left: 0px; right: 0px;",l="bottom: 0px; left: 0px; right: 0px;",m='content: "";',n='content: "";');var o=".hidden {display: none;}"+f+"#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images {"+e+"}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list {"+c+"list-style: none;margin: 0px;padding: 0px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li {"+d+g+"background: #000;z-index: 1;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li.active {display: block;z-index: 4;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li.next {display: block;z-index: 3;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li.prev {display: block;z-index: 2;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-images .rs-photo-gallery-images-list li img {width: 100%;transform: rotate(.0001deg);}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnails-outer {"+h+"position: absolute;background: #000;background: rgba(0, 0, 0, .75);z-index: 20;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnails {"+i+"position: absolute;overflow: hidden;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnail-list {list-style: none;margin: 0px;padding: 10px;position: absolute;top: 0px;left: 0px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnail-list li {width: "+config.thumbnailWidth+"px;height: "+config.thumbnailHeight+"px;"+j+'cursor: pointer;overflow: hidden;opacity: .5;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter: alpha(opacity=50);-khtml-opacity: 0.5;-moz-opacity: 0.5;-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;}#rs-photo-gallery-container-'+elemID+' .rs-photo-gallery-thumbnail-list li.active {opacity: 1;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter: alpha(opacity=100);-khtml-opacity: 1;-moz-opacity: 1;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-thumbnail-list li.last {margin: 0px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumbnail-list li img {display: block;width: 100%;height: auto;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control {padding: 7px 10px;cursor: pointer;background: #000;background: rgba(0, 0, 0, .20);-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.back {"+k+"position: absolute;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.back:before {"+m+"display: block;text-align: center;line-height: 1;color: #FFF;font-size: 13px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.next {"+l+"position: absolute;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-thumb-control.next:before {"+n+"display: block;text-align: center;line-height: 1;color: #FFF;font-size: 13px;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-desc {position: absolute;bottom: 0px;right: 0px;left: 0px;z-index: 20;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-control-text {position: relative;display: block;width: 0px !important;height: 0px !important;overflow: hidden !important;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-control.play-pause {width: 24px;height: 25px;position: absolute;bottom: 20px;left: 20px;z-index: 15;border-radius: 5px;background: #000;background: rgba(0, 0, 0, .80);}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-control.play-pause.playing:before {content: "";width: 0px;height: 15px;position: absolute;top: 5px;left: 7.5px;border-left: double 10px #FFF;}#rs-photo-gallery-container-'+elemID+' .rs-photo-gallery-control.play-pause.paused:before {content: "";width: 0px;height: 0px;border-style: solid;border-width: 7.5px 0 7.5px 10px;border-color: transparent transparent transparent #FFF;position: absolute;top: 5px;left: 8.5px;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-control.back {width: 30px;height: 30px;position: absolute;top: 50%;left: 20px;margin-top: -15px;z-index: 20;cursor: pointer;}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-control.back:before {content: "<";display: block;text-align: center;line-height: 100%;color: #FFF;font-size: 50px;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-control.next {width: 30px;height: 30px;position: absolute;top: 50%;right: 20px;margin-top: -15px;z-index: 20;cursor: pointer;}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-control.next:before {content: ">";display: block;text-align: center;line-height: 100%;color: #FFF;font-size: 50px;}#rs-photo-gallery-container-'+elemID+" .rs-photo-gallery-bullets-outer {position: absolute;top: 0px;left: 0px;text-align: center;z-index: 10;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-bullet {width: 12px;height: 12px;background: #FFF;border: solid 1px #666;display: inline-block;margin: 0px 5px;cursor: pointer;border-radius: 8px;-moz-background-clip: padding;-webkit-background-clip: padding;background-clip: padding-box;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-bullet.active {background: #999;}#rs-photo-gallery-container-"+elemID+" .rs-photo-gallery-bullet-control {width: 15px;height: 15px;display: inline-block;margin: 0px 10px;cursor: pointer;vertical-align: top;}#rs-photo-gallery-container-"+elemID+' .rs-photo-gallery-bullet-control.back:before {content: "<";color: #FFF;font-size: 20px;display: block;line-height: 12px;text-align: center;}#rs-photo-gallery-container-'+elemID+' .rs-photo-gallery-bullet-control.next:before {content: ">";color: #FFF;font-size: 20px;display: block;line-height: 12px;text-align: center;}#rs-photo-gallery-container-'+elemID+" .rs-photo-caption.active, .rs-photo-title.active {position: relative;z-index: 2;}#rs-photo-gallery-container-"+elemID+" .rs-photo-caption.next, .rs-photo-title.next {display: none;position: relative;z-index: 1;}#rs-photo-gallery-container-"+elemID+" .image.loading .loader {display: block;position: absolute;top: 50%;left: 50%;width: 150px;height: 150px;line-height: 150px;color: #ccc;font-size: 14px;margin: -75px 0px 0px -75px;box-sizing: border-box;text-align: center;z-index: 5;text-transform: uppercase;}#rs-photo-gallery-container-"+elemID+' .loader:before, .loader:after {opacity: 0;box-sizing: border-box;content: "\\0020";position: absolute;top: 0;left: 0;width: 100%;height: 100%;border-radius: 100px;border: 5px solid #fff;box-shadow: 0 0 50px #fff, inset 0 0 50px #fff;}#rs-photo-gallery-container-'+elemID+" .loader:after {z-index: 1;-webkit-animation: gogoloader 2s infinite 1s;}#rs-photo-gallery-container-"+elemID+" .loader:before {z-index: 2;-webkit-animation: gogoloader 2s infinite;}@-webkit-keyframes gogoloader {0% {-webkit-transform: scale(0);opacity: 0;}50% {opacity: 1;}100% {-webkit-transform: scale(1);opacity: 0;}}",p=document.createTextNode(o);a.styleSheet?a.styleSheet.cssText=o:a.appendChild(p)}}function sliderDimReset(){var a=getBreakPoint();if("yes"==config.customResize)config.customResizeFunction.call(this,element,config.imageWidth,config.imageHeight);else if("yes"==config.fullScreenRotator&&config.fullScreenBreakpoints.indexOf(a)>-1){var b=$(element).offset().top,c=$(window).width(),d=$(window).height()-b,g=$(".rs-photo-gallery-images-list li",element).length,h=c*g,i=c,j=0,k=config.imageWidth,l=config.imageHeight,m=l/k,j=i*m;j<d&&(j=d,i=j/m);var n=(i-c)/2,o=(j-d)/2,p=$(".rs-photo-gallery-images-list li.active",element).index();c=parseInt(c);var q=p*c;$(".rs-photo-gallery-container",element).css({height:d+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css({height:d+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css({width:h+"px",height:d+"px",left:"-"+q+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css({width:c+"px",height:d+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).css({width:i+"px",height:j+"px",margin:"-"+o+"px 0px 0px -"+n+"px"})}else{var r=$(element).width()>config.imageWidth?config.imageWidth:$(element).width(),s=config.imageHeight/config.imageWidth,t=r*s,g=$(".rs-photo-gallery-images-list li",element).length,h=r*g,p=$(".rs-photo-gallery-images-list li.active",element).index();r=parseInt(r);var q=p*r;$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css({height:t+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css({width:h+"px",height:t+"px",left:"-"+q+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css({width:r+"px",height:t+"px"}),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).removeAttr("style")}}function windowResize(){if(recordNum>1&&timerStop(),"yes"==config.customResize)config.customResizeFunction.call(this,element,config.imageWidth,config.imageHeight);else{if("fade"==config.transitionType){var a=getBreakPoint();if("yes"==config.fullScreenRotator&&config.fullScreenBreakpoints.indexOf(a)>-1){var b=$(element).offset().top,c=$(window).width(),d=$(window).height()-b,e=d/c,f=c*e,g=c,h=0,i=config.imageWidth,j=config.imageHeight,k=j/i,h=g*k;h<d&&(h=d,g=h/k);var l=(g-c)/2,m=(h-d)/2;$(".rs-photo-gallery-container",element).css("height",f+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css("height",f+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css("height",f+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("height",f+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).css({width:g+"px",height:h+"px",margin:"-"+m+"px 0px 0px -"+l+"px"})}else{var g=$(".rs-photo-gallery-images .rs-photo-gallery-images-list li",element).width(),i=config.imageWidth,j=config.imageHeight,k=j/i,h=g*k;$(".rs-photo-gallery-container .rs-photo-gallery-images",element).css("height",h+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list",element).css("height",h+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li",element).css("height",h+"px"),$(".rs-photo-gallery-container .rs-photo-gallery-images .rs-photo-gallery-images-list li img",element).removeAttr("style")}}"slide"==config.transitionType&&sliderDimReset()}if(recordNum>1&&timerReset(),"yes"==config.thumbnails)if("vertical"==config.thumbnailSlideDirection){var n=parseInt($(".rs-photo-gallery-thumbnail-list",element).css("top"))*-1,o=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0)-$(".rs-photo-gallery-thumbnails",element).outerHeight(!0);n>o&&$(".rs-photo-gallery-thumbnail-list",element).css("top","-"+o+"px");var p=$(".rs-photo-gallery-thumbnails",element).outerHeight(!0),q=$(".rs-photo-gallery-thumbnail-list",element).outerHeight(!0);if(q>p){var r=$(".rs-photo-gallery-thumb-control.back",element).outerHeight(!0)+10,s=$(".rs-photo-gallery-thumb-control.next",element).outerHeight(!0)+10;$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({top:r+"px",bottom:s+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-top":"0px","padding-bottom":"0px","margin-top":"0px","margin-bottom":"0px"})}else $(".rs-photo-gallery-thumb-control",element).addClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({top:"0px",bottom:"0px"}),$(".rs-photo-gallery-thumbnail-list",element).removeAttr("style")}else if("horizontal"==config.thumbnailSlideDirection){var t=$(".rs-photo-gallery-thumbnails",element).outerWidth(!0),u=$(".rs-photo-gallery-thumbnail-list",element).outerWidth(!0);if(u>t){var v=$(".rs-photo-gallery-thumb-control.back",element).outerWidth(!0)+10,w=$(".rs-photo-gallery-thumb-control.next",element).outerWidth(!0)+10;$(".rs-photo-gallery-thumb-control",element).removeClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({left:v+"px",right:w+"px"}),$(".rs-photo-gallery-thumbnail-list",element).css({"padding-left":"0px","padding-right":"0px","margin-left":"0px","margin-right":"0px"})}else{var x=0;$(".rs-photo-gallery-thumbnail",element).each(function(){x+=$(this).outerWidth(!0)}),$(".rs-photo-gallery-thumbnail-list",element).removeAttr("style").css("width",x+"px"),$(".rs-photo-gallery-thumb-control",element).addClass("hidden"),$(".rs-photo-gallery-thumbnails",element).css({left:"0px",right:"0px"})}}}function getBreakPoint(){return $(window).width()>=1024?"960":$(window).width()>=768&&$(window).width()<1024?"768":$(window).width()>=640&&$(window).width()<768?"640":$(window).width()>=480&&$(window).width()<640?"480":$(window).width()>=320&&$(window).width()<480?"320":void 0}var element=this,moduleID=$(element).parent().parent().attr("id").replace("pmi-",""),myJSON=eval("photoGallery"+moduleID),recordNum=myJSON.Album.Images.length,elemID=moduleID,csKeyCodes={tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40};$(window).bind("resize",windowResize),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1});var getWidth=$(window).width();"yes"==config.appHeader&&$(element).prepend('<div class="ui-widget-header"><h1>'+myJSON.Album.title+"</h1></div>"),recordNum>0&&(buildStyleSheet(),gatherMedia(),"yes"==config.efficientLoad?loadInitImages():loadImages(),loadThumbs(),recordNum>1&&(galleryEvents(),"yes"==config.autoRotate&&galleryTimer()),windowResize()),config.allLoaded.call(this)})}}(jQuery),function(a,b,c){"function"==typeof define&&define.amd?define(["jquery"],function(d){return c(d,a,b),d.mobile}):c(a.jQuery,a,b)}(this,document,function(a,b,c,d){!function(a,b,c,d){function e(a){for(;a&&"undefined"!=typeof a.originalEvent;)a=a.originalEvent;return a}function f(b,c){var g,h,i,j,k,l,m,n,o,f=b.type;if(b=a.Event(b),b.type=c,g=b.originalEvent,h=a.event.props,f.search(/^(mouse|click)/)>-1&&(h=C),g)for(m=h.length,j;m;)j=h[--m],b[j]=g[j];if(f.search(/mouse(down|up)|click/)>-1&&!b.which&&(b.which=1),f.search(/^touch/)!==-1&&(i=e(g),f=i.touches,k=i.changedTouches,l=f&&f.length?f[0]:k&&k.length?k[0]:d,l))for(n=0,o=A.length;n<o;n++)j=A[n],b[j]=l[j];return b}function g(b){for(var d,e,c={};b;){d=a.data(b,x);for(e in d)d[e]&&(c[e]=c.hasVirtualBinding=!0);b=b.parentNode}return c}function h(b,c){for(var d;b;){if(d=a.data(b,x),d&&(!c||d[c]))return b;b=b.parentNode}return null}function i(){K=!1}function j(){K=!0}function k(){O=0,I.length=0,J=!1,j()}function l(){i()}function m(){n(),E=setTimeout(function(){E=0,k()},a.vmouse.resetTimerDuration)}function n(){E&&(clearTimeout(E),E=0)}function o(b,c,d){var e;return(d&&d[b]||!d&&h(c.target,b))&&(e=f(c,b),a(c.target).trigger(e)),e}function p(b){var d,c=a.data(b.target,y);!J&&(!O||O!==c)&&(d=o("v"+b.type,b),d&&(d.isDefaultPrevented()&&b.preventDefault(),d.isPropagationStopped()&&b.stopPropagation(),d.isImmediatePropagationStopped()&&b.stopImmediatePropagation()))}function q(b){var d,f,h,c=e(b).touches;c&&1===c.length&&(d=b.target,f=g(d),f.hasVirtualBinding&&(O=N++,a.data(d,y,O),n(),l(),H=!1,h=e(b).touches[0],F=h.pageX,G=h.pageY,o("vmouseover",b,f),o("vmousedown",b,f)))}function r(a){K||(H||o("vmousecancel",a,g(a.target)),H=!0,m())}function s(b){if(!K){var c=e(b).touches[0],d=H,f=a.vmouse.moveDistanceThreshold,h=g(b.target);H=H||Math.abs(c.pageX-F)>f||Math.abs(c.pageY-G)>f,H&&!d&&o("vmousecancel",b,h),o("vmousemove",b,h),m()}}function t(a){if(!K){j();var c,d,b=g(a.target);o("vmouseup",a,b),H||(c=o("vclick",a,b),c&&c.isDefaultPrevented()&&(d=e(a).changedTouches[0],I.push({touchID:O,x:d.clientX,y:d.clientY}),J=!0)),o("vmouseout",a,b),H=!1,m()}}function u(b){var d,c=a.data(b,x);if(c)for(d in c)if(c[d])return!0;return!1}function v(){}function w(b){var c=b.substr(1);return{setup:function(){u(this)||a.data(this,x,{});var d=a.data(this,x);d[b]=!0,D[b]=(D[b]||0)+1,1===D[b]&&M.bind(c,p),a(this).bind(c,v),L&&(D.touchstart=(D.touchstart||0)+1,1===D.touchstart&&M.bind("touchstart",q).bind("touchend",t).bind("touchmove",s).bind("scroll",r))},teardown:function(){--D[b],D[b]||M.unbind(c,p),L&&(--D.touchstart,D.touchstart||M.unbind("touchstart",q).unbind("touchmove",s).unbind("touchend",t).unbind("scroll",r));var d=a(this),e=a.data(this,x);e&&(e[b]=!1),d.unbind(c,v),u(this)||d.removeData(x)}}}var P,Q,x="virtualMouseBindings",y="virtualTouchID",z="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),A="clientX clientY pageX pageY screenX screenY".split(" "),B=a.event.mouseHooks?a.event.mouseHooks.props:[],C=a.event.props.concat(B),D={},E=0,F=0,G=0,H=!1,I=[],J=!1,K=!1,L="addEventListener"in c,M=a(c),N=1,O=0;for(a.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},Q=0;Q<z.length;Q++)a.event.special[z[Q]]=w(z[Q]);L&&c.addEventListener("click",function(b){var e,f,g,h,i,j,c=I.length,d=b.target;if(c)for(e=b.clientX,f=b.clientY,P=a.vmouse.clickDistanceThreshold,g=d;g;){for(h=0;h<c;h++)if(i=I[h],j=0,g===d&&Math.abs(i.x-e)<P&&Math.abs(i.y-f)<P||a.data(g,y)===i.touchID)return b.preventDefault(),void b.stopPropagation();g=g.parentNode}},!0)}(a,b,c),function(a){a.mobile={}}(a),function(a,b){var d={touch:"ontouchend"in c};a.mobile.support=a.mobile.support||{},a.extend(a.support,d),a.extend(a.mobile.support,d)}(a),function(a,b,d){function e(b,c,e,f){var g=e.type;e.type=c,f?a.event.trigger(e,d,b):a.event.dispatch.call(b,e),e.type=g}var f=a(c),g=a.mobile.support.touch,h="touchmove scroll",i=g?"touchstart":"mousedown",j=g?"touchend":"mouseup",k=g?"touchmove":"mousemove";a.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(b,c){a.fn[c]=function(a){return a?this.bind(c,a):this.trigger(c)},a.attrFn&&(a.attrFn[c]=!0)}),a.event.special.scrollstart={enabled:!0,setup:function(){function b(a,b){f=b,e(c,f?"scrollstart":"scrollstop",a)}var f,g,c=this,d=a(c);d.bind(h,function(c){a.event.special.scrollstart.enabled&&(f||b(c,!0),clearTimeout(g),g=setTimeout(function(){b(c,!1)},50))})},teardown:function(){a(this).unbind(h)}},a.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var b=this,c=a(b),d=!1;c.bind("vmousedown",function(g){function h(){clearTimeout(l)}function i(){h(),c.unbind("vclick",j).unbind("vmouseup",h),f.unbind("vmousecancel",i)}function j(a){i(),d||k!==a.target?d&&a.preventDefault():e(b,"tap",a)}if(d=!1,g.which&&1!==g.which)return!1;var l,k=g.target;c.bind("vmouseup",h).bind("vclick",j),f.bind("vmousecancel",i),l=setTimeout(function(){a.event.special.tap.emitTapOnTaphold||(d=!0),e(b,"taphold",a.Event("taphold",{target:k}))},a.event.special.tap.tapholdThreshold)})},teardown:function(){a(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),f.unbind("vmousecancel")}},a.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(a){var c=b.pageXOffset,d=b.pageYOffset,e=a.clientX,f=a.clientY;return 0===a.pageY&&Math.floor(f)>Math.floor(a.pageY)||0===a.pageX&&Math.floor(e)>Math.floor(a.pageX)?(e-=c,f-=d):(f<a.pageY-d||e<a.pageX-c)&&(e=a.pageX-c,f=a.pageY-d),{x:e,y:f}},start:function(b){var c=b.originalEvent.touches?b.originalEvent.touches[0]:b,d=a.event.special.swipe.getLocation(c);return{time:(new Date).getTime(),coords:[d.x,d.y],origin:a(b.target)}},stop:function(b){var c=b.originalEvent.touches?b.originalEvent.touches[0]:b,d=a.event.special.swipe.getLocation(c);return{time:(new Date).getTime(),coords:[d.x,d.y]}},handleSwipe:function(b,c,d,f){if(c.time-b.time<a.event.special.swipe.durationThreshold&&Math.abs(b.coords[0]-c.coords[0])>a.event.special.swipe.horizontalDistanceThreshold&&Math.abs(b.coords[1]-c.coords[1])<a.event.special.swipe.verticalDistanceThreshold){var g=b.coords[0]>c.coords[0]?"swipeleft":"swiperight";return e(d,"swipe",a.Event("swipe",{target:f,swipestart:b,swipestop:c}),!0),e(d,g,a.Event(g,{target:f,swipestart:b,swipestop:c}),!0),!0}return!1},eventInProgress:!1,setup:function(){var b,c=this,d=a(c),e={};b=a.data(this,"mobile-events"),b||(b={length:0},a.data(this,"mobile-events",b)),b.length++,b.swipe=e,e.start=function(b){if(!a.event.special.swipe.eventInProgress){a.event.special.swipe.eventInProgress=!0;var d,g=a.event.special.swipe.start(b),h=b.target,i=!1;e.move=function(b){g&&!b.isDefaultPrevented()&&(d=a.event.special.swipe.stop(b),i||(i=a.event.special.swipe.handleSwipe(g,d,c,h),i&&(a.event.special.swipe.eventInProgress=!1)),Math.abs(g.coords[0]-d.coords[0])>a.event.special.swipe.scrollSupressionThreshold&&b.preventDefault())},e.stop=function(){i=!0,a.event.special.swipe.eventInProgress=!1,f.off(k,e.move),e.move=null},f.on(k,e.move).one(j,e.stop)}},d.on(i,e.start)},teardown:function(){var b,c;b=a.data(this,"mobile-events"),b&&(c=b.swipe,delete b.swipe,b.length--,0===b.length&&a.removeData(this,"mobile-events")),c&&(c.start&&a(this).off(i,c.start),c.move&&f.off(k,c.move),c.stop&&f.off(j,c.stop))}},a.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(b,c){a.event.special[b]={setup:function(){a(this).bind(c,a.noop)},teardown:function(){a(this).unbind(c)}}})}(a,this)});