// TABBED CONTENT APPLICATION FOR RESPONSIVE DESIGNS
// ACCESSIBILITY EXAMPLE - http://www.oaa-accessibility.org/examplep/tabpanel1/
// VERSION 10.12.16

!function(a){a.fn.tabBlocks=function(){return this.each(function(){function c(c,d){var f=a(".tab-button",b).length-1;if(!d.altKey)switch(d.keyCode){case 37:case 38:if(!d.ctrlKey){d.preventDefault(),d.stopPropagation();var g;g=0==parseInt(c.attr("data-index"))?a(".tab-button[data-index='"+f+"']",b):a(".tab-button[data-index='"+(parseInt(c.attr("data-index"))-1)+"']",b),e(c,g)}break;case 39:case 40:if(!d.ctrlKey){d.preventDefault(),d.stopPropagation();var h;h=parseInt(c.attr("data-index"))==f?a(".tab-button[data-index='0']",b):a(".tab-button[data-index='"+(parseInt(c.attr("data-index"))+1)+"']",b),e(c,h)}break;case 36:d.preventDefault(),d.stopPropagation(),e(c,a(".tab-button[data-index='0']",b));break;case 35:d.preventDefault(),d.stopPropagation(),e(c,a(".tab-button[data-index='"+f+"']",b))}}function d(c,d){var f=a(".tab-button",b).length-1;if(!d.altKey)switch(d.keyCode){case 27:d.preventDefault(),d.stopPropagation();break;case 37:case 38:d.ctrlKey&&(d.preventDefault(),d.stopPropagation(),a(".tab-button.active",b).focus());break;case 33:if(d.ctrlKey){d.preventDefault(),d.stopPropagation();var g;g=0==parseInt(c.attr("data-index"))?a(".tab-button[data-index='"+f+"']",b):a(".tab-button[data-index='"+(parseInt(c.attr("data-index"))-1)+"']",b),e(c,g)}break;case 34:if(d.ctrlKey){d.preventDefault(),d.stopPropagation();var h;h=parseInt(c.attr("data-index"))==f?a(".tab-button[data-index='0']",b):a(".tab-button[data-index='"+(parseInt(c.attr("data-index"))+1)+"']",b),e(c,h)}}}function e(c,d){a(c).removeClass("active").attr("aria-selected","false").attr("tabindex","-1"),a(d).addClass("active").attr("aria-selected","true").attr("tabindex","0").focus();var e=parseInt(d.attr("data-index"));a("div.ui-widget.app.activeTabApp",b).removeClass("active-app"),a("div.ui-widget.app.activeTabApp:eq("+e+")",b).addClass("active-app"),a(".tab-panel",b).attr("aria-hidden","true"),a(".tab-panel[data-index='"+e+"']",b).attr("aria-hidden","false")}var b=this;a("div[id*='pmi']",b).not(a("div[id*='pmi'] div[id*='pmi']",b)).each(function(b){var c=a(this).attr("id").replace("pmi-","");a(this).addClass("tab-panel").attr("aria-labelledby","cs-tab-"+c+"-"+(b+1)).attr("aria-hidden","true").attr("role","tabpanel").attr("data-index",b)}),a(b).prepend("<div class='tabs-container' role='tablist'><div class='clear'></div></div>"),a("div.ui-widget.app",b).not(a("div.ui-widget.app div.ui-widget.app",b)).each(function(c){var d=a("div.ui-widget-header h1",this).html();a(this).parents("div.region.ui-hp").find("div.tabs-container div.clear").before("<div id='cs-tab-"+a("> div[id*='pmi']",b).eq(c).attr("id").replace("pmi-","")+"-"+(c+1)+"' class='tab-button' aria-controls='"+a("> div[id*='pmi']",b).eq(c).attr("id")+"' aria-selected='false' role='tab' tabindex='-1' data-index='"+c+"'><span class='tab-left'></span><span class='tab-right'>"+d+"</span></div>"),a(this).hasClass("blog")&&a(this).parent().wrap('<div class="ui-widget app blog-wrapper activeTabApp"></div>')}),a("div.tabs-container .tab-button:eq(0)",b).addClass("active").attr("aria-selected","true").attr("tabindex","0"),a(".tab-panel",b).eq(0).attr("aria-hidden","false"),a("div.ui-widget.app",b).addClass("activeTabApp"),a("div.ui-widget.app div.ui-widget.app",b).removeClass("activeTabApp"),a("div.ui-widget.app:eq(0)",b).addClass("active-app"),a("div.tab-button",b).click(function(){e(a(".tab-button.active",b),a(this))}),a(".tab-button",b).keydown(function(b){c(a(this),b)}),a(".tab-button",b).live("mouseover mouseout",function(b){"mouseover"==b.type?a(this).addClass("hover"):a(this).removeClass("hover")}),a(".tab-panel",b).keydown(function(b){d(a(this),b)})})}}(jQuery);